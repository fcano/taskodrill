{% extends "base.html" %}

{% block content %}
    <h1>{{ context.name }}</h1>
    <p><a href="{% url 'context_update' context.pk %}">Edit</a>
    <p>
        <a id="new_task_button" class="btn btn-primary" href="{% url 'task_add' %}?context_id={{ context.id }}&next={{ context.get_absolute_url }}">New task</a>
    </p>
    <p>Tasks: <span id="tasks_count">{{ context.pending_tasks.count }}</span></p>
    <h2>Tasks in context</h2>
    {% if context.task_set.count == 0 %}
    <p>This context does not have tasks.</p>
    {% else %}
        {% include 'tasks/tasks_table.html' with task_list=context.pending_tasks.all %}
    {% endif %}
{% endblock %}
